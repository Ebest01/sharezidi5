Message for Replit AI:
FILE NOT FOUND - The server/prod-server.ts File Doesn't Exist
The error is:
âœ˜ [ERROR] Could not resolve "server/prod-server.ts"
This means the file server/prod-server.ts was never created or never committed to Git.
IMMEDIATE DEBUG STEPS
Step 1: Check if the file exists
bashls -la server/
Step 2: Check if it's in Git
bashgit status
git ls-files | grep prod-server
Step 3: If the file doesn't exist, create it NOW
Create server/prod-server.ts:
typescriptimport express from "express";
import path from "path";
import { createServer } from "http";
import { WebSocketServer, WebSocket } from "ws";
import { FileTransferService } from "./services/fileTransferService.js";
import QRCode from 'qrcode';
import { networkInterfaces } from 'os';

const app = express();
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

const httpServer = createServer(app);
const fileTransferService = new FileTransferService();

// API endpoints
app.post('/api/generate-qr', async (req, res) => {
  try {
    const { url } = req.body;
    if (!url) {
      return res.status(400).json({ error: 'URL is required' });
    }
    const qrCodeDataUrl = await QRCode.toDataURL(url, {
      width: 200,
      margin: 2,
      color: { dark: '#000000', light: '#FFFFFF' }
    });
    res.send(qrCodeDataUrl);
  } catch (error) {
    console.error('QR code generation failed:', error);
    res.status(500).json({ error: 'Failed to generate QR code' });
  }
});

app.get('/api/network-info', (req, res) => {
  try {
    const interfaces = networkInterfaces();
    const ips: string[] = [];
    
    Object.values(interfaces).forEach(networkInterface => {
      networkInterface?.forEach(details => {
        if (details.family === 'IPv4' && !details.internal) {
          ips.push(details.address);
        }
      });
    });

    const port = process.env.PORT || 5000;
    const urls = ips.map(ip => `http://${ip}:${port}`);
    
    res.json({ urls, currentHost: req.get('host'), port });
  } catch (error) {
    console.error('Network info failed:', error);
    res.status(500).json({ error: 'Failed to get network info' });
  }
});

// WebSocket setup
const wss = new WebSocketServer({ 
  server: httpServer, 
  path: '/ws',
  perMessageDeflate: false
});

wss.on('connection', (ws: WebSocket, request) => {
  console.log('[WebSocket] New connection');
  
  const userId = Math.random().toString(36).substring(2, 8);
  const userAgent = request.headers['user-agent'] || '';
  
  let deviceName = 'Unknown Device';
  if (userAgent.includes('Windows')) deviceName = 'Windows PC';
  else if (userAgent.includes('Macintosh')) deviceName = 'Mac';
  else if (userAgent.includes('iPhone')) deviceName = 'iPhone';
  else if (userAgent.includes('iPad')) deviceName = 'iPad';
  else if (userAgent.includes('Android')) deviceName = 'Android Device';
  else if (userAgent.includes('Linux')) deviceName = 'Linux PC';
  
  fileTransferService.registerUser(userId, ws, deviceName);

  ws.on('close', () => {
    fileTransferService.unregisterUser(userId);
  });
});

// Serve static files
const publicPath = path.resolve(process.cwd(), "dist/public");
app.use(express.static(publicPath));
app.get("*", (_req, res) => {
  res.sendFile(path.join(publicPath, "index.html"));
});

const port = 5000;
httpServer.listen({ port, host: "0.0.0.0" }, () => {
  console.log(`Production server running on port ${port}`);
});
Step 4: Commit and push
bashgit add server/prod-server.ts
git commit -m "Add missing prod-server.ts file"
git push
The file simply doesn't exist in your repository, which is why the build is failing.